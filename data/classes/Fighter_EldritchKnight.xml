<class>
    <ref>PHB p.75</ref>
    <name>Eldritch Knight</name>
    <parent>Fighter</parent>

    <!-- TODO support spellcasting from subclass -->
    <spellCastingSpellClass>Wizard</spellCastingSpellClass>
    <spellCastingStat>intelligence</spellCastingStat>
    <multiclassCasterFactor>1/3</multiclassCasterFactor>

    <level value="3">
        <!-- TODO limit these to only certain schools -->
        <cantrips>
            <known>2</known>
        </cantrips>
        <spells>
            <known>3</known>
            <slots>
                <level value="1">2</level>
            </slots>
        </spells>

        <feature>
            <name>Weapon Bond</name>
            <shortDescription>You can create a bond between yourself and one weapon. You perform the ritual over the course of an hour, which can be done during a short rest. The weapon must be within your reach throughout the riutal, at the conclusion of which you touch the weapon and forge the bond.
            Once you have bonded a weapon to yourself, you can't be disarmed of that weapon unless you are incapacitated. If it is on the same plane of existence, you can summon that weapon as a bonus action on your turn, causing it to teleport instantly to your hand.
            You can have up to two bonded weapons, but can summon only one at a time with your bonus action. If you attempt to bond with a third weapon, you must break the bond with one of the other two.</shortDescription>
            <context>WEAPON_ATTACK</context>
        </feature>
    </level>

    <level value="4">
        <cantrips>
            <known>2</known>
        </cantrips>
        <spells>
            <known>4</known>
            <slots>
                <level value="1">3</level>
            </slots>
        </spells>
    </level>

    <level value="7">
        <feature>
            <name>War Magic</name>
            <shortDescription>When you use your action to cast a cantrip, you can make one weapon attack as a bonus action.</shortDescription>
            <context>SPELL_CAST,WEAPON_ATTACK</context>
        </feature>
        <cantrips>
            <known>2</known>
        </cantrips>
        <spells>
            <known>5</known>
            <slots>
                <level value="1">4</level>
                <level value="2">2</level>
            </slots>
        </spells>
    </level>

    <level value="8">
        <cantrips>
            <known>2</known>
        </cantrips>
        <spells>
            <known>6</known>
            <slots>
                <level value="1">4</level>
                <level value="2">2</level>
            </slots>
        </spells>
    </level>

    <level value="10">
        <feature>
            <name>Eldricth Strike</name>
            <shortDescription>You weapon strikes undercut a creature's resistance to your spells. When you hit a creature with a weapon attack, that creature has disadvantage on the next saving throw it makes against a spell you cast before the end of your next turn.</shortDescription>
            <context>SPELL_CAST,WEAPON_ATTACK</context>
        </feature>
        <cantrips>
            <known>3</known>
        </cantrips>
        <spells>
            <known>7</known>
            <slots>
                <level value="1">4</level>
                <level value="2">3</level>
            </slots>
        </spells>
    </level>

    <level value="11">
        <cantrips>
            <known>3</known>
        </cantrips>
        <spells>
            <known>8</known>
            <slots>
                <level value="1">4</level>
                <level value="2">3</level>
            </slots>
        </spells>
    </level>

    <level value="13">
        <cantrips>
            <known>3</known>
        </cantrips>
        <spells>
            <known>9</known>
            <slots>
                <level value="1">4</level>
                <level value="2">3</level>
                <level value="3">2</level>
            </slots>
        </spells>
    </level>

    <level value="14">
        <cantrips>
            <known>3</known>
        </cantrips>
        <spells>
            <known>10</known>
            <slots>
                <level value="1">4</level>
                <level value="2">3</level>
                <level value="3">2</level>
            </slots>
        </spells>
    </level>

    <level value="15">
        <feature extension="extend">
            <name>Action Surge</name>
            <extensionDescription>You can teleport up to 30 feet away on when you use an Action Surge.</extensionDescription>
            <shortDescription>On your turn, you can take one additional action on top of your regular action and a possible bonus action.
                Additionally, before or after the additional action, you can teleport up to 30 feet to an unoccupied space you can see.</shortDescription>
            <context>WEAPON_ATTACK,SPEED</context>
        </feature>
    </level>

    <level value="16">
        <cantrips>
            <known>3</known>
        </cantrips>
        <spells>
            <known>11</known>
            <slots>
                <level value="1">4</level>
                <level value="2">3</level>
                <level value="3">3</level>
            </slots>
        </spells>
    </level>

    <level value="18">
        <feature extension="extend">
            <name>War Magic</name>
            <extensionDescription>Improved War Magic, you can make a weapon attack as a bonus action after casting a spell, not just a cantrip.</extensionDescription>
            <shortDescription>When you use your action to cast a spell, you can make one weapon attack as a bonus action.</shortDescription>
            <context>SPELL_CAST,WEAPON_ATTACK</context>
        </feature>
    </level>

    <level value="19">
        <cantrips>
            <known>3</known>
        </cantrips>
        <spells>
            <known>12</known>
            <slots>
                <level value="1">4</level>
                <level value="2">3</level>
                <level value="3">3</level>
                <level value="3">1</level>
            </slots>
        </spells>
    </level>

    <level value="20">
        <cantrips>
            <known>3</known>
        </cantrips>
        <spells>
            <known>13</known>
            <slots>
                <level value="1">4</level>
                <level value="2">3</level>
                <level value="3">3</level>
                <level value="3">1</level>
            </slots>
        </spells>
    </level>


</class>